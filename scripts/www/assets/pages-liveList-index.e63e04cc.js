import{H as S,v as r,A as N,I as T,y as V,z as A,h as B,j as E,o as i,c as _,w as a,d as s,k as u,f as D,r as P,C as n,F as $,e as b,p as q,i as F,D as M,E as Q,t as p}from"./index.1767597253495.js";import{_ as I}from"./u-loadmore.2e529468.js";import{_ as O}from"./live.718e5af7.js";import{A as R}from"./index.80508513.js";import{E as j}from"./index.48c17fa0.js";import{N as z}from"./index.ce942f0e.js";import{_ as H}from"./_plugin-vue_export-helper.c27b6911.js";import"./u-loading-icon.673d6857.js";import"./u-search.8580cc22.js";import"./u-icon.33222906.js";function J(c){return S.Post("/home/get/list",c)}const G=()=>{const c=r([]),o=r(1),f=r(20),v=r(0),m=async()=>{var t={method:[2,1,3],page:o.value,per_page:f.value};const d=await J(t);if(d.returnCode==200){var y=[...c.value,...d.data.data];const x=new Map,e=y.filter(L=>x.has(L.id)?!1:(x.set(L.id,!0),!0));c.value=e,v.value=d.data.total,o.value=d.data.current_page,f.value=d.data.per_page}},l=r("loadmore"),w=r("努力加载中 ！"),g=r("点击加载更多"),C=r("没有更多数据了"),h=async()=>{if(l.value=="nomore"){console.log("没有更多数据了"),T({title:"已经没有更多数据了",duration:2e3,icon:"none"});return}else l.value=="loadmore"?(l.value="loading",o.value=o.value+1,await m(),c.value.length==v.value?l.value="nomore":l.value="loadmore"):l.value=="loading"&&(T({title:"当前正在加载中",duration:2e3,icon:"none"}),console.log("当前正在加载中!"))},k=async()=>{await m()};return N(()=>{k()}),{liveList:c,total:v,page:o,per_page:f,status:l,loadingText:w,loadmoreText:g,nomoreText:C,getLiveList:m,setMore:h}},K=V({__name:"index",setup(c){const{liveList:o,status:f,loadingText:v,loadmoreText:m,nomoreText:l,setMore:w}=G(),g=r();return A(()=>{g.value&&g.value.handleScroll()}),N(()=>{console.log("liveList",JSON.stringify(o.value))}),(C,h)=>{const k=q,t=F,d=B(E("up-loadmore"),I);return i(),_(R,null,{default:a(()=>{var y;return[s(z,{style:{width:"95%"},ref_key:"navQueryRef",ref:g},null,512),s(t,{class:"debutBox"},{default:a(()=>{var x;return[s(t,{class:"title"},{default:a(()=>[s(t,{class:"text-left"},{default:a(()=>[s(k,{src:O,mode:"widthFix",style:{width:"40rpx",height:"40rpx","margin-right":"5upx"}}),u(" 直播列表 ")]),_:1})]),_:1}),(i(!0),D($,null,P(n(o),e=>(i(),_(t,{class:"content",key:e.id,onClick:L=>n(M)("Live",{lid:e.id})},{default:a(()=>[s(t,{class:"left-img"},{default:a(()=>[Q("img",{src:e.pic,style:{width:"100%",height:"100%"},width:"100%",hieght:"100%",alt:"",class:"_u_alt"},null,8,["src"]),e.status=="直播中"?(i(),_(t,{key:0,class:"tab-start"},{default:a(()=>[u(p(e.status),1)]),_:2},1024)):e.status=="未开始"?(i(),_(t,{key:1,class:"tab-finish"},{default:a(()=>[u(p(e.status),1)]),_:2},1024)):e.status=="回放中"?(i(),_(t,{key:2,class:"tab-noStart"},{default:a(()=>[u(p(e.status),1)]),_:2},1024)):b("",!0)]),_:2},1024),s(t,{class:"right-info"},{default:a(()=>[s(t,{class:"title"},{default:a(()=>[u(p(e.title),1)]),_:2},1024),s(t,{class:"tips"},{default:a(()=>[u(p(e.OwnerAlias),1)]),_:2},1024),s(t,{class:"tips-date"},{default:a(()=>[s(t,{class:"date"},{default:a(()=>[u(p(e.StartTime),1)]),_:2},1024),s(t,{class:"number"},{default:a(()=>[u(p(e.Views?e.Views:0)+"观看 ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),((x=n(o))==null?void 0:x.length)!=0?(i(),_(d,{key:0,dashed:"",line:"",status:n(f),"loading-text":n(v),"loadmore-text":n(m),"nomore-text":n(l),onClick:h[0]||(h[0]=e=>n(w)()),class:"_u_dashed _u_line"},null,8,["status","loading-text","loadmore-text","nomore-text"])):b("",!0)]}),_:1}),((y=n(o))==null?void 0:y.length)==0?(i(),_(j,{key:0})):b("",!0)]}),_:1})}}});const le=H(K,[["__scopeId","data-v-6bc85bcb"]]);export{le as default};
