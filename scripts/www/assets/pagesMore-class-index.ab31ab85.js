import{y as E,v as t,z as L,A as T,x as A,h as V,j as P,o as c,c as m,w as s,d as n,E as k,k as w,f as Q,r as $,F,e as N,I as S,i as I,C as M,G as R,t as b}from"./index.1767597253495.js";import{_ as j}from"./u-loadmore.2e529468.js";import{_ as q}from"./ks.1155e2ae.js";import{A as z}from"./index.80508513.js";import{N as G}from"./index.ce942f0e.js";import{E as H}from"./index.48c17fa0.js";import{c as J}from"./home.c6cabe6a.js";import{_ as K}from"./_plugin-vue_export-helper.c27b6911.js";import"./u-loading-icon.673d6857.js";import"./u-search.8580cc22.js";import"./u-icon.33222906.js";const O=E({__name:"index",setup(U){const o=t([]),u=t(1),p=t(10),d=t(0),e=t("loadmore"),g=t("努力加载中 ！"),x=t("点击载更多"),y=t("没有更多数据了"),B=async()=>{o.value=[],u.value=1,p.value=10,d.value=0,e.value="loadmore",g.value="努力加载中 ！",x.value="点击载更多",y.value="没有更多数据了"},h=async()=>{var C={page:u.value,per_page:p.value};const l=await J(C);if(l.returnCode==200){var a=[...o.value,...l.data.data];const _=new Map,v=a.filter(i=>_.has(i.id)?!1:(_.set(i.id,!0),!0));o.value=v,d.value=l.data.total,u.value=l.data.current_page,p.value=l.data.per_page,o.value.length>=d.value?e.value="nomore":e.value="loadmore"}},D=async()=>{if(e.value=="nomore"){console.log("没有更多数据了"),S({title:"已经没有更多数据了",duration:2e3,icon:"none"});return}else e.value=="loadmore"?(e.value="loading",u.value=Number(u.value)+1,await h(),o.value.length==d.value?e.value="nomore":e.value="loadmore"):e.value=="loading"&&S({title:"当前正在加载中",duration:2e3,icon:"none"})},f=t();return L(()=>{f.value&&f.value.handleScroll()}),T(()=>{B()}),A(()=>{h()}),(C,l)=>{const a=I,_=V(P("up-loadmore"),j);return c(),m(z,null,{default:s(()=>[n(G,{style:{width:"95%"},ref_key:"navQueryRef",ref:f},null,512),n(a,{class:"DepartmentBox2"},{default:s(()=>{var v,i;return[n(a,{class:"title"},{default:s(()=>[n(a,{class:"text-left"},{default:s(()=>[k("img",{src:q,style:{width:"30upx","margin-right":"5upx"},alt:"",class:"_u_alt"}),w(" 科室分类 ")]),_:1})]),_:1}),(c(!0),Q(F,null,$(o.value,r=>(c(),m(a,{class:"content",key:r.id,onClick:W=>M(R)(r.id,"科室",r)},{default:s(()=>[n(a,{class:"left-img"},{default:s(()=>[k("img",{src:r.pic,style:{height:"180rpx"},hieght:"180rpx",alt:"",class:"_u_alt"},null,8,["src"])]),_:2},1024),n(a,{class:"right-info"},{default:s(()=>[n(a,{class:"title"},{default:s(()=>[w(b(r.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),((v=o.value)==null?void 0:v.length)!=0?(c(),m(_,{key:0,dashed:"",line:"",status:e.value,"loading-text":g.value,"loadmore-text":x.value,"nomore-text":y.value,onClick:l[0]||(l[0]=r=>D()),class:"_u_dashed _u_line"},null,8,["status","loading-text","loadmore-text","nomore-text"])):N("",!0),((i=o.value)==null?void 0:i.length)==0?(c(),m(H,{key:1})):N("",!0)]}),_:1})]),_:1})}}});const ue=K(O,[["__scopeId","data-v-1d0fad81"]]);export{ue as default};
