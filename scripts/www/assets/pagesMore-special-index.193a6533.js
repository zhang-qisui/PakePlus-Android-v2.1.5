import{y as E,v as t,z as L,A as T,x as A,h as V,j as $,o as c,c as _,w as s,d as n,k as C,f as F,r as P,F as Q,e as S,I as N,p as b,i as q,C as I,G as M,E as R,t as j}from"./index.1767597253495.js";import{_ as z}from"./u-loadmore.2e529468.js";import{_ as G}from"./tabs.821417fa.js";import{A as H}from"./index.80508513.js";import{b as J}from"./home.c6cabe6a.js";import{E as K}from"./index.48c17fa0.js";import{N as O}from"./index.ce942f0e.js";import{_ as U}from"./_plugin-vue_export-helper.c27b6911.js";import"./u-loading-icon.673d6857.js";import"./u-search.8580cc22.js";import"./u-icon.33222906.js";const W=E({__name:"index",setup(X){const o=t([]),u=t(1),v=t(10),d=t(0),e=t("loadmore"),g=t("努力加载中 ！"),x=t("点击载更多"),h=t("没有更多数据了"),B=async()=>{o.value=[],u.value=1,v.value=10,d.value=0,e.value="loadmore",g.value="努力加载中 ！",x.value="点击载更多",h.value="没有更多数据了"},y=async()=>{var w={page:u.value,per_page:v.value};const l=await J(w);if(l.returnCode==200){var p=[...o.value,...l.data.data];const a=new Map,f=p.filter(i=>a.has(i.id)?!1:(a.set(i.id,!0),!0));o.value=f,d.value=l.data.total,u.value=l.data.current_page,v.value=l.data.per_page,o.value.length>=d.value?e.value="nomore":e.value="loadmore"}},D=async()=>{if(e.value=="nomore"){console.log("没有更多数据了"),N({title:"已经没有更多数据了",duration:2e3,icon:"none"});return}else e.value=="loadmore"?(e.value="loading",u.value=Number(u.value)+1,await y(),o.value.length==d.value?e.value="nomore":e.value="loadmore"):e.value=="loading"&&N({title:"当前正在加载中",duration:2e3,icon:"none"})},m=t();return L(()=>{m.value&&m.value.handleScroll()}),T(()=>{B()}),A(()=>{y()}),(w,l)=>{const p=b,a=q,f=V($("up-loadmore"),z);return c(),_(H,null,{default:s(()=>{var i;return[n(O,{style:{width:"95%"},ref_key:"navQueryRef",ref:m},null,512),n(a,{class:"DepartmentBox2"},{default:s(()=>{var k;return[n(a,{class:"title"},{default:s(()=>[n(a,{class:"text-left"},{default:s(()=>[n(p,{src:G,style:{width:"30rpx",height:"30rpx","margin-right":"5rpx"},alt:"",mode:"widthFix",class:"_u_alt"}),C(" 精彩专题 ")]),_:1})]),_:1}),(c(!0),F(Q,null,P(o.value,r=>(c(),_(a,{class:"content",key:r.id,onClick:Y=>I(M)(r.id,"专题",r)},{default:s(()=>[n(a,{class:"left-img"},{default:s(()=>[R("img",{src:r.pic,style:{width:"100%",height:"100%"},width:"100%",hieght:"100%",alt:"",class:"_u_alt"},null,8,["src"])]),_:2},1024),n(a,{class:"right-info"},{default:s(()=>[n(a,{class:"title"},{default:s(()=>[C(j(r.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),((k=o.value)==null?void 0:k.length)!=0?(c(),_(f,{key:0,dashed:"",line:"",status:e.value,"loading-text":g.value,"loadmore-text":x.value,"nomore-text":h.value,onClick:l[0]||(l[0]=r=>D()),class:"_u_dashed _u_line"},null,8,["status","loading-text","loadmore-text","nomore-text"])):S("",!0)]}),_:1}),((i=o.value)==null?void 0:i.length)==0?(c(),_(K,{key:0})):S("",!0)]}),_:1})}}});const ce=U(W,[["__scopeId","data-v-2187185f"]]);export{ce as default};
